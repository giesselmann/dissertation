# BUILD STAGE
FROM ubuntu:18.04 as build_stage
## build packages
RUN apt-get install -y python3-dev python3-pip git gcc g++ binutils autoconf make cmake zlib1g-dev bzip2 libbz2-dev liblzma-dev libncurses5-dev
## run setup rules
RUN mkdir /build
RUN snakemake --snakefile rules/install.smk --directory /build alignment

# PACKAGE STAGE
FROM ubuntu:18.04
MAINTAINER Pay Giesselmann <giesselmann@molgen.mpg.de>
## runtime packages
RUN apt-get install -y python3
## copy binaries from build stage
COPY --from=build_stage /build/bin/* /usr/bin/
